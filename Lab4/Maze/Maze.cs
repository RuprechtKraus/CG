using System.Collections.Generic;
using OpenTK.Graphics;

namespace Maze
{
    internal class Maze
    {
        private const int MAZE_WIDTH = 17;
        private const int MAZE_HEIGHT = 17;

        private readonly char[,] _pattern = new char[ MAZE_WIDTH, MAZE_HEIGHT ]
        {
            { '*','*','*','*','*','*','*',' ','*','*','*','*','*','*','*','*','*' },
            { '*',' ',' ',' ',' ',' ','*',' ',' ',' ',' ',' ',' ',' ','*',' ','*' },
            { '*',' ','*','*','*',' ','*',' ','*','*','*','*','*',' ','*',' ','*' },
            { '*',' ','*',' ',' ',' ','*',' ',' ',' ',' ',' ','*',' ','*',' ','*' },
            { '*','*','*',' ','*','*','*',' ','*','*','*','*','*',' ','*',' ','*' },
            { '*',' ',' ',' ','*',' ',' ',' ','*',' ',' ',' ','*',' ','*',' ','*' },
            { '*',' ','*',' ','*',' ','*','*','*','*','*',' ','*',' ','*',' ','*' },
            { '*',' ','*',' ','*',' ','*',' ','*',' ',' ',' ','*',' ','*',' ','*' },
            { '*',' ','*','*','*',' ','*',' ','*',' ','*','*','*',' ','*',' ','*' },
            { '*',' ',' ',' ',' ',' ',' ',' ','*',' ',' ',' ','*',' ','*',' ','*' },
            { '*',' ','*','*','*','*','*','*','*','*','*',' ','*',' ','*',' ','*' },
            { '*',' ',' ',' ',' ',' ','*',' ',' ',' ',' ',' ','*',' ','*',' ','*' },
            { '*','*','*','*','*',' ','*',' ','*','*','*','*','*',' ','*',' ','*' },
            { '*',' ','*',' ',' ',' ','*',' ',' ',' ',' ',' ',' ',' ','*',' ','*' },
            { '*',' ','*',' ','*','*','*','*','*','*','*','*','*','*','*',' ','*' },
            { '*',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','*' },
            { '*','*','*','*','*','*','*','*','*',' ','*','*','*','*','*','*','*' },
        };

        private readonly Wall[] _walls = new Wall[ MAZE_WIDTH * MAZE_HEIGHT ];

        public Maze()
        {
            int k = -1;

            for ( int i = 0; i < MAZE_WIDTH; i++ )
            {
                for ( int j = 0; j < MAZE_HEIGHT; j++ )
                {
                    k++;

                    if ( _pattern[ i, j ] == ' ' )
                    {
                        continue;
                    }

                    _walls[ k ] = new Wall(
                        j - MAZE_WIDTH,
                        i - MAZE_HEIGHT,
                        j - MAZE_WIDTH + 1,
                        i - MAZE_HEIGHT + 1,
                        1,
                        Color4.Crimson );
                }
            }
        }

        public virtual void Draw()
        {
            for ( int i = 0; i < MAZE_WIDTH * MAZE_HEIGHT; i++ )
            {
                if ( _walls[ i ] == null )
                {
                    continue;
                }

                _walls[ i ].Draw();
            }
        }
    }
}
